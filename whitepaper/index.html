<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"><title data-react-helmet="true">whitepaper | DODO Docs</title><meta data-react-helmet="true" property="og:title" content="whitepaper | DODO Docs"><meta data-react-helmet="true" name="description" content="whitepaper"><meta data-react-helmet="true" property="og:description" content="whitepaper"><meta data-react-helmet="true" property="og:url" content="https://DODOEX.github.io/docs/docs/whitepaper"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://DODOEX.github.io/docs/docs/whitepaper"><link rel="stylesheet" href="/docs/styles.56803c0f.css">
<link rel="preload" href="/docs/styles.218d5230.js" as="script">
<link rel="preload" href="/docs/runtime~main.e8d907cc.js" as="script">
<link rel="preload" href="/docs/main.6ae98335.js" as="script">
<link rel="preload" href="/docs/1.fa82b0fd.js" as="script">
<link rel="preload" href="/docs/2.954ba3eb.js" as="script">
<link rel="preload" href="/docs/46.f6499e89.js" as="script">
<link rel="preload" href="/docs/8eee19dc.b0daa17d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://DODOEX.github.io/docs/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/docs/img/logo.svg" alt="DODO"><strong class="navbar__title">DODO Docs</strong></a><a class="navbar__item navbar__link" href="/docs/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/whitepaper">WhitePaper</a><a href="https://app.dodoex.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Exchange</a><a href="https://github.com/DODOEX" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://DODOEX.github.io/cn/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">中文版</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://DODOEX.github.io/docs/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/docs/img/logo.svg" alt="DODO"><strong class="navbar__title">DODO Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/whitepaper">WhitePaper</a></li><li class="menu__list-item"><a href="https://app.dodoex.io" target="_blank" rel="noopener noreferrer" class="menu__link">Exchange</a></li><li class="menu__list-item"><a href="https://github.com/DODOEX" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://DODOEX.github.io/cn/" target="_blank" rel="noopener noreferrer" class="menu__link">中文版</a></li></ul></div></div></div></nav><div class="main-wrapper"><main><div class="container container--fluid"><div class="margin-vert--lg padding-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><div class="container"><div align="center"><font size="70">DODO</font></div><center><b>———A Next-Generation On-Chain Liquidity Provider Powered by Pro-active Market Maker Algorithm</b></center><center>V1.0</center><center><b>DODO Team</b></center><center><i>contact@dodoex.io</i></center><p><strong>Abstract:</strong> This article introduce DODO, a next-generation on-chain liquidity provider, which leverages the Proactive Market Maker algorithm (PMM) to provide pure on-chain and contract-fillable liquidity for everyone. Comparing to other on-chain liquidity solutions, DODO has multiple advantages: high fund utilization, low slippage, single risk exposure, reduced impermanent loss. We also discuss the core concepts and mathematical details about Proactive Market Maker algorithm (PMM), and include the contract framework.</p><p><strong>Keywords:</strong> PMM; high fund utilization; reduced impermanent loss; single risk exposure</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1-introduction"></a><strong>1 Introduction</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-introduction" title="Direct link to heading">#</a></h2><p>DODO is a next-generation on-chain liquidity provider, which leverages the Proactive Market Maker algorithm (PMM) to provide pure on-chain and contract-fillable liquidity for everyone. DODO accepts liquidity providers&#x27; assets. It gathers funds near market prices to provide sufficient liquidity. In order to minimize counterparty risks for LPs, DODO dynamically adjusts market prices to encourage arbitrageurs to step in and stabilize LPs&#x27; portfolios. Comparing to other on-chain liquidity solutions, DODO has multiple advantages: high fund utilization, low slippage, single risk exposure, reduced impermanent loss.</p><p>As a trader, you can see these features: Each and every trader enjoys sufficient liquidity similar to that of centralized exchanges; Arbitrageurs can profit from price discrepancies between DODO and other exchanges; Smart contracts can natively use DODO liquidity to complete on-chain transactions, such as liquidation and auctions</p><p>As a liquidity provider (LP), you can see these features: There are no minimal deposit requirements and restrictions on asset types; DODO charges a fee for each transaction and eventually distributes it to LPs as rewards; LPs can create trading pairs with their own tokens; LPs can obtain liquidity by depositing their tokens they already own, without taking on price risk.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-protocol"></a><strong>2 Protocol</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-protocol" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="21-the-dodo-advantage"></a><strong>2.1 The DODO Advantage</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#21-the-dodo-advantage" title="Direct link to heading">#</a></h3><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="211-overview"></a><strong>2.1.1 Overview</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#211-overview" title="Direct link to heading">#</a></h5><p>DODO is powered by a ground-breaking algorithm called Proactive Market Maker (PMM). PMM leverages price oracles to retrieve accurate market prices of assets as input. It then aims to provide sufficient liquidity near the market price for every asset. The result is that liquidity decreases rapidly when far away from the market price. The following graphs compare the price curves of DODO (PMM) and Uniswap (AMM).</p><p>With everything else fixed, it is clear that the PMM curve is significantly flatter than the AMM curve near the market price, indicating higher fund utilization and lower slippage. Prices provided by PMM are more favorable than AMM.</p><p><img src="https://dodoex.github.io/docs/img/dodo_curve.jpeg"></p><p>As the market price changes, AMM passively relies on arbitrage trading to change prices. On the other hand, PMM proactively shifts the price curve in the same direction to ensure that the section in the vicinity of the market price remains flat. This ensures the constant provision of sufficient liquidity.</p><p><img src="https://dodoex.github.io/docs/img/dodo_curve_move.jpeg"></p><p>PMM outperforms AMM solutions in several important aspects.</p><ul><li><strong><em>High Fund Utilization</em></strong></li></ul><p>As seen in the above graphs, PMM, like AMMs, provides liquidity in the price range of zero to positive infinity, but the PMM price curve is significantly flatter in the area near the oracle (market) price. That is, most of the funds are gathered near the market price, which allows for more active, frequent trading, increasing fund utilization.</p><ul><li><strong><em>Single Risk Exposure</em></strong></li></ul><p>In the price curves above, each price curve consists of two parts: the bidding side to the left and the asking side to the right. These two parts may have different depth, or liquidity, resulting in what is known as the <a href="https://en.wikipedia.org/wiki/Bid%E2%80%93ask_spread" target="_blank" rel="noopener noreferrer">bid-ask spread</a><sup>[1]</sup>.</p><p><img src="https://dodoex.github.io/docs/img/dodo_segment.jpeg"></p><p>In PMM, the asking liquidity is solely determined by the amount of base token in the pool, and the bidding liquidity is solely determined by the amount of quote tokens in the pool. It allows the base and quote pools tohave different sizes, and thus allows liquidity providers to deposit any amount of either quote or base tokens, rather than both (like Uniswap). DODO Liquidity providers deposit what they already have, nothing more.</p><p>Please note: The design is intuitive, because when you take an asking order, you take liquidity providers&#x27; base tokens and the quote tokens are irrelevant.</p><ul><li><strong><em>Reduced Impermanent Loss</em></strong></li></ul><p>But what about impermanent loss, i.e. how does PMM ensure that liquidity providers get what they deposited when they withdraw their tokens? The answer is by encouraging arbitrage trading. When individual traders buy base tokens, PMM slightly increases the price to make it more profitable for arbitrageurs to sell base tokens. In PMM, arbitrage trading makes sure that the number of tokens in the pool is always roughly equal to the number of tokens deposited by liquidity providers. This scheme effectively mitigates impermanent loss for liquidity providers, making liquidity provision on DODO a low-risk affair.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="212-next-generation-of-liquidity-provision"></a><strong>2.1.2 Next Generation of Liquidity Provision</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#212-next-generation-of-liquidity-provision" title="Direct link to heading">#</a></h4><p>Liquidity is the most important resource in the DeFi world, because it is the foundational element in all DeFi projects. There are two major proven approaches to decentralized liquidity provision today:</p><ul><li><p>Algorithmic market makers (e.g. Uniswap)</p></li><li><p>Orderbook-based order matching (e.g. dYdX)</p></li></ul><p>However, they are both flawed.</p><ul><li><p>Compared to centralized exchanges, algorithmic market makers cannot provide sufficient liquidity for mainstream assets. In addition, for niche, long-tail assets, AMM can only provide very basic liquidity support</p></li><li><p>Orderbook-based order matching relies on human market makers to mirroring centralized exchanges liquidity. Effective market makers are expensive, and very few DEX teams can afford them. In addition, this kind of liquidity is difficult to be filled by smart contracts due to the human elements involved, significantly limiting the number of use cases for DeFi practitioners</p></li></ul><p>PMM is also an algorithmic market maker algorithm, but it fundamentally differs from other approaches by mitigating and eliminating their disadvantages and amplifying their advantages. PMM provides sufficient and contract-fillable liquidity on-chain for all assets, empowering DeFi users to take advantage of composability</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-2-core-concepts"></a><strong>2 .2 Core Concepts</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-2-core-concepts" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="221-base--quote-token"></a><strong>2.2.1 Base &amp; Quote Token</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#221-base--quote-token" title="Direct link to heading">#</a></h4><p><em>Base _and _quote</em> are two concepts that will be mentioned frequently. Two easy ways to distinguish between them are:</p><ul><li><p>In a trading pair, the <em>base</em> is always the token before the hyphen, and <em>quote</em> after</p></li><li><p>In transactions, price refers to how many <em>quote</em> tokens are needed in exchange for one <em>base</em> token</p></li></ul><p>For example, in the ETH-USDC trading pair, ETH is the <em>base</em> token and USDC is the <em>quote</em> token</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="222-pmm-parameters"></a><strong>2.2.2 PMM Parameters</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#222-pmm-parameters" title="Direct link to heading">#</a></h4><p>The funding pool of PMM is described by four parameters:</p><ul><li><p>$B_0$: base token regression target - total number of base tokens deposited by liquidity providers</p></li><li><p>$Q_0$ : quote token regression target - total number of quote tokens deposited by liquidity providers</p></li><li><p>$B$: base token balance - number of base tokens currently in the pool</p></li><li><p>$Q$: quote token balance - number of quote tokens currently in the pool</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="223-pmm-pricing-formula"></a><strong>2.2.3 PMM Pricing Formula</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#223-pmm-pricing-formula" title="Direct link to heading">#</a></h4><p>The PMM price curve is plotted by the following pricing formula:</p><p>$P_{margin}=iR$</p><p>Where <em>R</em> is defined to be the piecewise function below:</p><p><em>if</em> $B&lt;B_0, R=1-k+(\frac{B_0}{B})^2k$</p><p><em>if</em> $Q&lt;Q_0, R=1/(1-k+(\frac{Q_0}{Q})^2k)$</p><p><em>else</em> $R=1$</p><p><em>i</em> is the market price provided by an oracle, and <em>k</em> is a parameter in the range (0, 1).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="224-three-possible-states-in-pmm"></a><strong>2.2.4 Three Possible States in PMM</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#224-three-possible-states-in-pmm" title="Direct link to heading">#</a></h4><p>At any given time, PMM is in one of three possible states: equilibrium, base token shortage, and quote token shortage.</p><p><img src="https://dodoex.github.io/docs/img/dodo_mode_switch.jpeg"></p><p>Initially, i.e. prior to any transaction, the capital pool is in equilibrium, and both base tokens and quote token are at their regression targets. That is, $B=B_0$ ​ and $Q=Q_0$​.</p><p>When a trader sells base tokens, the base token balance of the capital pool is higher than the base token regression target; conversely, the quote token balance is now lower than the quote token regression target. In this state, PMM will try to sell the excess base tokens, lowering the base token balance and increasing the quote token balance, in order to move this state back to the state of equilibrium.</p><p>When a trader buys base tokens, the quote token balance of the capital pool is higher than the quote token regression target; conversely, the base token balance is now lower than the base token regression target. In this state, PMM will try to sell the excess quote tokens, lowering the quote token balance and increasing the base token balance, in order to move this state back to the state of equilibrium.</p><p>The parameter <em>R</em> in the pricing formula above assumes a critical role in facilitating this regression process. The more the capital pool deviates from the equilibrium state, the more <em>R</em> deviates from <em>1</em>. When the price given by the PMM algorithm deviates from the market price, arbitrageurs step in to help bring the capital pool back to the equilibrium state.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="225-liquidity-provider-fee"></a><strong>2.2.5 Liquidity Provider Fee</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#225-liquidity-provider-fee" title="Direct link to heading">#</a></h4><p>A small amount of transaction fee will be charged on every trade. This fee is called the liquidity provider fee and will be distributed to every liquidity provider based on their proportional stake in the capital pool.</p><p>More specifically, liquidity provider fees are collected from what buyers received and distributed to liquidity providers who supplied this kind of asset to the capital pool. In other words, liquidity providers are rewarded in the same asset denomination.</p><p>For example, when traders buy ETH tokens with USDC tokens, liquidity provider fees will be charged in the form of ETH tokens, and distributed to liquidity providers who deposited ETH tokens into the capital pool.</p><p>When traders sell ETH tokens for USDC tokens, liquidity provider fees will be charged in the form of USDC tokens, and distributed to liquidity providers who deposited USDC tokens into the capital pool.</p><p>Please note: Base and quote tokens have different returns on investments (ROI) in PMM&#x27;s funding pool.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="226-maintainer-fee"></a><strong>2.2.6 Maintainer Fee</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#226-maintainer-fee" title="Direct link to heading">#</a></h4><p>A maintainer fee is also collected from what buyers received, and will be directly transferred to the maintainer. The maintainer may be a development team, a foundation, or a staking decentralized autonomous organization (DAO). Currently, the maintenance fee on DODO is 0.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="227-withdraw-fee"></a><strong>2.2.7 Withdraw Fee</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#227-withdraw-fee" title="Direct link to heading">#</a></h4><p>A withdrawal will change the PMM price curve and may harm the interests of other liquidity providers. DODO charges a withdrawal fee from liquidity providers who withdraw their assets and distribute it to all remaining liquidity providers.</p><p>Please note:</p><p>Normally, the withdrawal fee is 0 or an extremely small percentage (\&lt;0.01%) of what you withdraw. The withdrawal fee will increase significantly only if the funding pool suffers from a serious shortage of either base or quote tokens and liquidity providers intend to withdraw the type of token in shortage. The withdrawal fee serves as a protection mechanism for liquidity providers who maintain their supplies of liquidity and contribute to the sustainability and overall health of the DODO platform.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="228-deposit-rewards"></a><strong>2.2.8 Deposit Rewards</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#228-deposit-rewards" title="Direct link to heading">#</a></h4><p>Rewards will be distributed to those who make a deposit of base(quote) tokens when the capital pool faces a shortage of base(quote) tokens.</p><p>In the next section, we will explain the math behind these core concepts.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="229-flexibility-and-k-the-liquidity-parameter"></a><strong>2.2.9 Flexibility and <em>k</em>, the &quot;Liquidity Parameter&quot;</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#229-flexibility-and-k-the-liquidity-parameter" title="Direct link to heading">#</a></h4><p>Last but not least, we will introduce the DODO&#x27;s &quot;liquidity parameter&quot;, <em>k</em>. The parameter <em>k</em> gives DODO the flexibility to handle different market situations.</p><p><img src="https://dodoex.github.io/docs/img/dodo_k.jpeg"></p><p>When <em>k</em> is <em>0</em>, DODO naively sells or buys at market price, as shown by the flat, blue line. As <em>k</em> increases, DODO&#x27;s price curve becomes more &quot;curved&quot;, but, consequently, liquidity becomes increasingly jeopardized, because more funds are placed far away from market price and are thus underutilized or not utilized at all. When <em>k</em> increases to <em>1</em>, the flat section near the market price is completely eliminated and the curve essentially becomes a standard AMM curve, which Uniswap uses.</p><p>Normally, <em>k</em> is recommended to be a relatively small value, such as <em>0.1</em>, which could provide liquidity 10 times better than the standard AMM algorithm.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="23-the-math-behind-pmm"></a><strong>2.3 The Math Behind PMM</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#23-the-math-behind-pmm" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="231-core-pmm"></a><strong>2.3.1 Core PMM</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#231-core-pmm" title="Direct link to heading">#</a></h4><p>The core of PMM is essentially calculating one integral and solving two quadratic equations. The smart contract implementation can be found here<sup>[2]</sup>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2311-the-price-curve-integral"></a><strong>2.3.1.1 The Price Curve Integral</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2311-the-price-curve-integral" title="Direct link to heading">#</a></h5><p>For traders, the most important thing is the average transaction price. The average transaction price is the integral of the marginal price  ​. Let&#x27;s take the base token shortage scenario as an example.</p><p><img src="https://dodoex.github.io/docs/img/dodo_integrate.jpeg"></p><p>$\Delta Q =\int^{B<em>2}</em>{B<em>1}P</em>{margin}dB$</p><p>$= \int^{B<em>2}</em>{B_1}(1-k)i+i(B_0/B)^2kdB$</p><p>$= i(B_2-B_1)*(1-k+k\frac{B_0^2}{B_1B_2})$</p><p>This tells the trader how much they should pay if they buy $B_1-B_2$ amount of base tokens.</p><p>Rearranging the equation above, the average transaction price is thus:</p><p>$P=\frac{\Delta Q}{B_2-B_1}=i*(1-k+k\frac{B_0^2}{B_1B_2})$</p><p>We found that the average transaction price is only dependent on the state of the system before and after the transaction, so the price calculation methods for both buying and selling are the same: integrating $​P_{margin}$ .</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2312-solving-the-quadratic-equation-for-trading"></a><strong>2.3.1.2 Solving the Quadratic Equation for Trading</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2312-solving-the-quadratic-equation-for-trading" title="Direct link to heading">#</a></h5><p>Without the loss of generality, the integral becomes the following when there is a shortage of quote tokens:</p><p>$\Delta B=\frac{1}{i}($$Q_2-Q_1$$) *(1-k+k\frac{Q_0^2}{Q_1Q_2})$</p><p>Let&#x27;s derive how to calculate the price when there is a shortage of quote tokens and only the number of base tokens you want to buy or sell (i.e. $\Delta B$ ) is given.</p><p>Now that $\Delta B$ , $Q_0$ , $Q_1$ are given, we need to calculate $Q_2$ , which is found by solving a quadratic equation. Transforming the equation into standard form:</p><p>$(1-k)Q_2^2 +(\frac{kQ_0^2}{Q_1}-Q_1+kQ_1-i\Delta B)Q_2-kQ_0^2=0$</p><p><em>let</em> $a=1-k, b=\frac{kQ_0^2}{Q_1}-Q_1+kQ_1-i\Delta B, c=-kQ_0^2$</p><p>Because $Q_2 \ge 0$, we discard the negative root, and so $Q_2=\frac{-b+\sqrt{b^2-4ac}}{2a}$</p><p>It can be proven that:</p><ul><li><p>When $\Delta B &gt; 0$ , $Q_2&gt;Q_1$ ; trader buy base token, and should pay $Q_2&gt;Q_1$</p></li><li><p>When $\Delta B ＜ 0$ , $Q_2＜Q_1$; trader sell base token, and will receive $Q_2&gt;Q_1$</p></li><li><p>When $\Delta B =0$， $Q_2=Q_1$</p></li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2313-solving-the-quadratic-equation-for-regression-targets"></a><strong>2.3.1.3 Solving the Quadratic Equation for Regression Targets</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2313-solving-the-quadratic-equation-for-regression-targets" title="Direct link to heading">#</a></h5><p>When the system is not in the equilibrium state, changes to the oracle price will bring profit or loss. For example, assume that shortage of base tokens is the current state, and the oracle price goes up. It is clear that the excess quote tokens cannot buy enough base tokens to return the base token balance to the base token regression target. Thus, LPs who deposited base tokens will suffer a loss. Conversely, if the oracle price drops, the excess quote tokens can buy more base tokens, causing the base token balance to exceed the base token regression target, and LPs who deposited base tokens will make a profit.</p><p>In summary, the regression target is influenced by the oracle price. To calculate the regression target at a certain oracle price, we make the following derivation:</p><p>Given:</p><p>$\Delta Q = i(B_2-B_1)*(1-k+k\frac{B_0^2}{B_1B_2})$</p><p>Since we are doing regression, . Rearranging the equation with respect to gives</p><p>$\frac{k}{B_1}B_0^2+(1-2k)B_0-[(1-k)B_1+\frac{\Delta Q}{i}] = 0$</p><p>The negative root does not make sense and is discarded, so $B_0$ is:</p><p>$B_0=B_1+B_1\frac{\sqrt{1+\frac{4k\Delta Q}{B_1 i}}-1}{2k}$</p><p>In this case, $\Delta Q = Q-Q_0$ . It can be proven that, when $\Delta Q \ge 0$ , $B_0＜B_1$.</p><p>This fact is extremely important, because it ensures that the base token balance and the quote token balance will never be greater than the regression target simultaneously, or less than the regression target simultaneously. This means that PMM will only switch between the three states discussed in the Core Concepts section.</p><p>Similarly, the formula for quote token regression target $Q_0$ is:</p><p>$Q_0=Q1+Q1*\frac{\sqrt{1+\frac{4k\Delta Bi}{Q_1}}-1}{2k}$</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="232-peripheral"></a><strong>2.3.2 Peripheral</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#232-peripheral" title="Direct link to heading">#</a></h4><p>This section will deal with the math pertaining to the peripheral functioning of PMM.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2321-trades"></a><strong>2.3.2.1 Trades</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2321-trades" title="Direct link to heading">#</a></h5><p>As mentioned above, the regression target depends on the oracle price, and the price curve in turn depend on the regression target. So in every trade, we should calculate the regression target well in advance to make the price curve fixed.</p><p>In addition, since the price curve given by PMM is segmented, if a transaction involves different states (for example, when a trader sells an astronomical amount of base tokens during a base token shortage and forces the state into a quote token shortage), the price needs to be calculated in segments as well.</p><p>Please be advised that this calculation requires a high degree of accuracy. The smart contract provides six trading functions for the three possible states. You can find the most important logic of cross-state trading <a href="https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/impl/Trader.sol" target="_blank" rel="noopener noreferrer">here</a><sup>[3]</sup>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2322-deposit"></a><strong>2.3.2.2 Deposit</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2322-deposit" title="Direct link to heading">#</a></h5><p>Depositing and withdrawing base token when there is a shortage of base tokens, or quote tokens when there is a shortage of quote token, will change the price curve. This requires us to process the deposit and withdrawal with caution and care in order to keep the capital pool sustainable and fair.</p><p>We will analyze what happens when an LP makes a deposit when there is a shortage of base tokens.</p><p>According to the calculation formula of $B_0$ derived above</p><p>$B_0=B_1+B_1*\frac{\sqrt{1+\frac{4k\Delta Q}{B_1i}}-1}{2k}$</p><p>After an LP deposit <em>b</em> base tokens, $B<em>1$ increases by _b</em>, and $B<em>0$ ​increases more than _b</em>&#x27;s magnitude. It means that this deposit helps all LPs who provided base token make a profit. The reason why is that the deposit makes the price curve smoother, and the same amount of $\Delta Q$ can now buy more base tokens.</p><p>In this case, as soon as the LP makes a deposit, the LP makes a profit. This is referred to as the deposit reward. The essential source of this reward is the slippage paid by the trader who made the system deviate from equilibrium state.</p><p>Please note: It is important to note that deposit rewards are not risk-free arbitrage trading opportunities.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2323-withdrawal"></a><strong>2.3.2.3 Withdrawal</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#2323-withdrawal" title="Direct link to heading">#</a></h5><p>Similarly, after an LP withdraws <em>b</em> base tokens, $B<em>1$ decreases by _b</em>, and $B_0$ decreases by more than b&#x27;s magnitude. This withdrawal causes all LPs who owes Base Tokens to suffer losses. This is because this withdrawal makes the price curve more steep, and the excess quote tokens have less purchasing power in terms of base tokens.</p><p>The PMM algorithm stipulates that a withdrawal fee is required to withdraw tokens in this case. The magnitude of the fee is equal to the aggregate loss of all LPs caused by the withdrawal. This fee will be directly distributed to all LPs that have not yet withdrawn.</p><p>Factoring in the deposit reward from the previous section, if an LP makes a withdrawal immediately after depositing, the withdrawal fee will be greater than the deposit reward, thus eliminating any possibility of risk-free arbitrage trading.</p><p>It is worth noting that both deposit reward and withdrawal fee are only significant when the system deviates very far from the equilibrium state and the deposit/withdrawal amount is large. Traders thus often overlook the existence of this gain/loss. Of course, traders are also welcome to extract value from the system by exploiting this if they so wish. In order to do that, they can first deposit to earn deposit rewards when the system deviates from the equilibrium, and then withdraw once the system returns to the equilibrium to avoid the withdrawal fee.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="3-contract"></a><strong>3 Contract</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#3-contract" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="31-overview"></a><strong>3.1 Overview</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#31-overview" title="Direct link to heading">#</a></h3><p>DODO is built with a set of smart contracts. The following figure shows the framework of these contracts and how they interact with each other in the DODO architecture.</p><p><img src="https://dodoex.github.io/docs/img/dodo_framework.jpeg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="32-core"></a><strong>3.2 Core</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#32-core" title="Direct link to heading">#</a></h3><p>The core part of the DODO framework, which contains all the data and logic of DODO, consists of a set of DODO Proxy contracts and a singular DODO Implementation contract. Each trading pair binds with an independent <em>DODO Proxy</em> contract (e.g. WETH-USDC, DAI-USDT, etc.), which is a transparent proxy that only stores states and metadata. All underlying logic lies in the <em>DODO Implementation</em> contract.</p><p>For convenience&#x27;s sake, we will call the transparent proxy <em>DODO Pair</em> and the logic implementation <em>DODO Template</em>. Users should interact with <em>DODO Pair</em> directly or through <em>Helper</em>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="33-entrance"></a><strong>3.3 Entrance</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#33-entrance" title="Direct link to heading">#</a></h3><p>DODO is an open-source contract, and the DODO team welcomes forks. However, it is important to note that the operation of <em>DODO Pair</em> is highly dependent on oracles and parameter fine-tuning, and a misconfigured <em>DODO Pair</em> could potentially cause significant losses for users. Therefore, we deployed an entrance contract to help blockchain developers navigate these obstacles. All <em>DODO Pairs</em> registered in this contract have been rigorously tested and audited, as the DODO team believes the safety of DODO users is of utmost importance. Developers should only look for the entrance called <em>DODO Zoo</em> when developing upon DODO. Even if the <em>DODO Template</em> is upgraded, <em>DODO Zoo</em> will remain unchanged.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="34-helper"></a><strong>3.4 Helper</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#34-helper" title="Direct link to heading">#</a></h3><p>There are a lot of tedious tasks that can be packaged using contracts to make them easy to use and understand. For example, the <em>DODO ETH Proxy</em> shown in the figure above helps users convert between ETH and WETH and interact with <em>DODO Pair</em>. This way, the underlying complexity with WETH is abstracted away from users, effectively protecting them - users do and should only care about directly buying or selling ETH on DODO. There are many such contracts, such as arbitrage and route, which we collectively call <em>Helper</em>. We invite the community to help develop more helper contracts and we are willing to provide guidance and support.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="4-use-case"></a><strong>4 Use Case</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#4-use-case" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="41-flash-swap"></a><strong>4.1 Flash Swap</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#41-flash-swap" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="411-what-is-flash-swap"></a><strong>4.1.1 What is Flash Swap</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#411-what-is-flash-swap" title="Direct link to heading">#</a></h4><p>Simply put, you are allowed to pay on credit on DODO! When you buy tokens DODO, you can first get the tokens you want to buy, do anything you want with the tokens, and pay for them later.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="412-how-does-flash-swap-work"></a><strong>4.1.2 How Does Flash Swap Work</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#412-how-does-flash-swap-work" title="Direct link to heading">#</a></h4><p><img src="https://dodoex.github.io/docs/img/dodo_flash_swap.jpeg"></p><p>The figure above illustrates the four steps in a flash swap happening under the hood</p><ol><li><p>Call the <em>buyBaseToken</em>  function from the <em>DODO Pair</em> smart contract</p></li><li><p><em>DODO Pair</em> transfers the base tokens to the message sender</p></li><li><p>If the parameter <em>data</em> of the <em>buyBaseToken</em> function call is not null, the <em>DODO Pair</em> smart contract will call the <em>dodoCall</em> method of the message sender</p></li><li><p>After the <em>dodoCall</em> is executed, the <em>DODO Pair</em> smart contract will retrieve the quote tokens required for this transaction from the message sender</p></li></ol><p>Please note: The <em>sellBaseToken</em> function can also perform flash swap in the same way.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="413-what-can-flash-swap-do"></a><strong>4.1.3 What Can Flash Swap Do</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#413-what-can-flash-swap-do" title="Direct link to heading">#</a></h4><p>Flash swap can significantly improve market efficiency. Market parity is maintained by arbitrageurs, and flash swap completely removes capital requirements for them, essentially eliminating the barrier of entry to arbitrage trading.</p><p>We will demonstrate a completely trustless and risk-free arbitrage trading contract as a use case of flash swap. Please refer to <a href="https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/helper/UniswapArbitrageur.sol" target="_blank" rel="noopener noreferrer">the <em>UniswapArbitrageur.sol</em> source code</a><sup>[4]</sup>  for a concrete example. It has already been deployed and you can check out its Etherscan link <a href="https://etherscan.io/address/0xbf90b54cc00ceeaa93db1f6a54a01e3fe9ed4422" target="_blank" rel="noopener noreferrer">here</a><sup>[5]</sup>.</p><p>The following figure illustrates how an arbitrageur might take advantage of the price discrepancies between DODO and Uniswap.</p><p><img src="https://dodoex.github.io/docs/img/dodo_one_click_arbitrage.jpeg"></p><p>A complete arbitrage trading maneuver consists of the following 9 steps:</p><ol><li><p>The user calls <em>executeBuyArbitrage</em> on <em>UniswapArbitrageur</em></p></li><li><p><em>UniswapArbitrageur</em> calls <em>buyBaseToken</em> on <em>DODO Pair</em> and triggers flash swap</p></li><li><p><em>DODO Pair</em> transfers 1 WETH to <em>UniswapArbitrageur</em></p></li><li><p><em>DODO Pair</em> calls <em>dodoCall</em> on <em>UniswapArbitrageur</em></p></li><li><p><em>UniswapArbitrageur</em> transfers 1 WETH received from <em>DODO Pair</em> to <em>UniswapV2</em></p></li><li><p><em>UniswapArbitrageur</em> calls swap on <em>UniswapV2</em></p></li><li><p><em>UniswapV2</em> transfers 200 USDC to <em>UniswapArbitrageur</em></p></li><li><p><em>DODO Pair</em> calls <em>transferFrom</em> and retrieves 150 USDC from <em>UniswapArbitrageur</em></p></li><li><p><em>UniswapArbitrageur</em> transfers the remaining 50 USDC to the user</p></li></ol><p>In summary,</p><ul><li>Steps 2, 3, 4, and 8 take care of the DODO front</li><li>Steps 5, 6, and 7 take care of the Uniswap front</li><li>The user is only exposed to the process of sending transactions and making profits, with everything else abstracted away!</li></ul><p>The best part about the <em>UniswapArbitrageur</em> contract is that users do not need any capital, nor do they need to know how DODO and Uniswap work. They would simply call a function and, if the execution succeeds, make a profit. If the execution fails, the users would only lose some gas.</p><p>In order to avoid unnecessary gas consumption, we recommend that users use <em>eth_call</em> to execute <em>executeBuyArbitrage</em> or <em>executeSellArbitrage</em> in advance to estimate arbitrage returns. If there is an arbitrage opportunity, these two functions will return profit of quote tokens and base tokens after successful execution.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="414-some-thoughts-on-flash-swap"></a><strong>4.1.4 Some Thoughts on Flash Swap</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#414-some-thoughts-on-flash-swap" title="Direct link to heading">#</a></h4><p>Once you have a deep understanding of flash swap, you will realize the superiority of the DeFi world over the centralized world. The composability of smart contracts has elevated the fund utilization of DeFi to an unprecedented level. Thanks to trustlessness, the cost of credit in DeFi is incredibly low. Once this financial system is integrated into the real world, its potential for improving our society and productivity will be truly boundless. The DODO team hopes that flash swap serves as a primer for DeFi builders and beginners alike to gain an appreciation for the power of DeFi.</p><p>Flash swap was inspired by dYdX and Uniswap. The DODO team genuinely appriciates and admires what these DeFi pioneers have done before us.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="42-initial-dodo-offering"></a><strong>4.2 Initial DODO Offering</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#42-initial-dodo-offering" title="Direct link to heading">#</a></h3><p>Initial DODO Offering (IDO) is a brand new approach to crypto asset issuance. Instead of paying exorbitant listing fees to get listed on CEXs or other DEXs, it is literally free to offer assets on DODO!</p><p>Normally, the PMM algorithm requires a price oracle to provide liquidity, but when there is no external market (which is usually the case when you are just starting your asset offering efforts), you can simply set the oracle price to a constant and start an initial DODO offering.</p><p>As discussed in previous sections, DODO, unlike AMM, does not require quote tokens. The only thing you need to do is to deposit your own tokens to the pool. After your token deposit, PMM creates ask side depth on its own. The more tokens you deposit, the better the liquidity.</p><p>Because there are no quote tokens in the pool, there is no bid side depth, but there is no need to worry. There are also no base tokens in the market and no one is selling either. IDO might feel somewhat similar to an auction, but there are some important differences.</p><p><img src="https://dodoex.github.io/docs/img/dodo_long_tail_1.jpeg"></p><p>Remember the constant price you set for the oracle? That price would be the initial offering price. When a trader buys your tokens, the price rises and quote tokens start flowing into the pool. These quote tokens then produce bid side depth as a result. Maybe we could call IDO a bidirectional auction.</p><p><img src="https://dodoex.github.io/docs/img/dodo_long_tail_2.jpeg"></p><p>Compared to AMM-based platforms, asset issuance on DODO provides more benefits:</p><ul><li>Sell tokens from an arbitrary price of your choice with zero capital requirement</li><li>Sufficient and contract-fillable liquidity</li><li>Flexible parameters (design your price curve by fine-tuning the parameters)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="5-authority"></a><strong>5 Authority</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#5-authority" title="Direct link to heading">#</a></h2><p>There are two special roles in each <em>DODO Pair</em> smart contract: <em>admin</em> and <em>supervisor</em>.</p><p>Here I would like to introduce the scope of power of <em>admin</em> and <em>supervisor</em>, and the principles of design behind.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="51-scope"></a><strong>5.1 Scope</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#51-scope" title="Direct link to heading">#</a></h3><p>Power of the supervisor is a subset of that of <em>admin</em>, and both <em>supervisor</em> and <em>admin</em> have A-level authority. Level A permissions include:</p><ul><li>Disable trade</li><li>Disable deposit</li><li>Set gas price limit</li></ul><p><em>admin</em> is the only one with B-level authority, which includes:</p><ul><li>Change admin</li><li>Change supervisor</li><li>Change maintainer</li><li>Change oracle</li><li>Set liquidity provider fee rate</li><li>Set maintainer fee rate</li><li>Set K</li><li>Enable trade</li><li>Enable deposit</li><li>Final settlement</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="52-principle"></a><strong>5.2 Principle</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#52-principle" title="Direct link to heading">#</a></h3><p>Level-A authority can be summarized as &quot;freeze status&quot; i.e. some functions of the system can be stopped urgently, but the status cannot be changed. In order to limit the power of <em>admin</em>, often actions taken by <em>admin</em> have to go through a complex governance process. To be risk resistant, we need a more flexible <em>supervisor</em> instead of an <em>admin</em> to take some actions that are not so sensitive but can significantly reduce system risks.</p><p>The B-level authority basically covers all aspects of the <em>DODO Pair</em> contract. The reason why so many parameters are designed to be variable is to better adapt to the rapidly changing market environment. It also leaves room for governance in the future.</p><p>It is worth pointing out that no one can prohibit users from withdrawing coins. Being non-custodial is the most important principle of Defi.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="6-decentralization"></a><strong>6 Decentralization</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#6-decentralization" title="Direct link to heading">#</a></h2><p>In our vision, DODO will be fully governed by the community, and controlled by three DAOs</p><ul><li><em>Admin DAO</em></li></ul><p>Act as an administrator, the ultimate mediator of all issues.</p><ul><li><em>Risk Control DAO</em></li></ul><p>Act as a supervisor and deal with all risk events urgently.</p><ul><li><em>Earn DAO</em></li></ul><p>To distribute revenue of maintainer.</p><p>When DODO was launched, all authorities were governed by the team. As the community learns more about DODO, we will gradually return all the rights to the community. Although there is no timeline for this process yet, we do intend to follow the process.</p><p>Steps:</p><ol><li><p>Set Admin to multi-sig wallet with daily limit</p></li><li><p>Deploy <em>DODOWild</em>: Allows anyone create their own DODO</p></li><li><p>Issue governance token</p></li><li><p>Set Maintainer to Earn DAO</p></li><li><p>Set Admin to Admin DAO</p></li><li><p>Set Supervisor to Risk Control DAO</p></li></ol><p>What is the purpose of each step?</p><ol><li>All admin actions come with a public announcement period to avoid single point failure</li><li>Anyone can create a new <em>DODO Pair</em> and use it to provide liquidity to their tokens. This marks the return of the code to the community</li><li>Issue governance tokens and formulate a token distribution plan, which will initiate the step down process</li><li>Hand over the profit distribution responsibility to Earn DAO</li><li>After handing admin authority over to the DAO, the team has no real control rights, and only reserves the right to control risk</li><li>The team steps down completely, marking the last step towards complete decentralization</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="7-risk-parameters"></a><strong>7 Risk Parameters</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#7-risk-parameters" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="71-front-running"></a><strong>7.1 Front Running</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#71-front-running" title="Direct link to heading">#</a></h3><p>Front running on DODO could occur in the following scenario.</p><p>Arbitrageurs listen for oracle price updates transactions. If they see that the oracle price for an asset will go up in the next block, they will buy asset on DODO before the price update by paying higher gas prices. And sell the asset immediately after the oracle price has been updated. This will result in a loss for liquidity providers, and this loss is referred to as arbitrage loss.</p><p>This might seem like a big deal, but the truth is, such opportunities are few and far between, and not necessarily profitable for arbitrageurs.</p><p>First of all, front running is only profitable when the price fluctuates significantly. This is because DODO charges a 0.3% transaction fee per trade, thus buying and selling assets once incurs a 0.6% transaction fee overall. Therefore, if the price discrepancy between the oracle updates is less than 0.6%, front running is not profitable at all for arbitrageurs.</p><p>Secondly, DODO uses Chainlink as its oracle of choice. The Chainlink price oracle provides price updates by aggregating updates from 22 independent price feeders. This means that price changes on DODO are usually gradual and thus not susceptible to front running.</p><p>With that said, although the probability of a significant price change between updates is low, it will happen, and arbitrageurs looking to extract value from the system will take advantage of front running. The DODO team conducted extensive backtesting and discovered that in the overwhelming majority of cases, profit from market making far outweighs arbitrage loss for liquidity providers.</p><p>Please note that arbitrage loss due to front running will increase significantly during drastic market fluctuations. The DODO team recommends withdrawing your assets during fluctuations to avert the risk and proceeding with caution depending on your risk profile.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="72-fee-percentage"></a><strong>7.2 Fee Percentage</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#72-fee-percentage" title="Direct link to heading">#</a></h3><p>As mentioned above, the transaction fee deters arbitrageurs from extracting value from the system via front running, protecting liquidity providers from arbitrage loss.</p><p>The question is, what should the transaction fee percentage be? Lowering the percentage leads to more trading, potentially increasing profit for liquidity providers, but also elevating risk of arbitrage loss. On the other hand, increasing the percentage lowers the risk of arbitrage loss, but also reduces profit for liquidity providers. It is crucial to strike a reasonable balance between risk and profit.</p><p>Since market fluctuations have a bearing on arbitrageur behaviors, the fee percentage should also be fine-tuned based on market changes. The fee percentage should be low to facilitate more trading when the market is relatively stable, and high when the market is fluctuating. Determining the appropriate fee percentage is an important  <strong>governance</strong>  issue, and users should collectively have a say in how much risk they are willing to take on.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="73-parameter-k"></a><strong>7.3 Parameter K</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#73-parameter-k" title="Direct link to heading">#</a></h3><p>Another important parameter is k from the PMM pricing formula. A small k provides good liquidity and increase trading volume, but increases the risk of arbitrage loss; whereas a large k hurts liquidity and decreases trading volume, but reduces the risk of arbitrage loss. Therefore, similar to the fee percentage above, the value of k should be governed and determined by the users.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="8-backtest"></a><strong>8 Backtest</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#8-backtest" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="81-background"></a><strong>8.1 Background</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#81-background" title="Direct link to heading">#</a></h3><p>PMM stands for Proactive Market Maker, which is essentially a quantitative trading strategy used by liquidity providers (LP). To help LP understand ROI of PMM, we&#x27;ve performed a backtest to demonstrate the performance of PMM in different market environments.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="82-method"></a><strong>8.2 Method</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#82-method" title="Direct link to heading">#</a></h3><p>Evaluation of PMM focuses on these two aspects: proﬁt and loss. The proﬁt for LP is turnover rate multiplied by fee rate. While the loss has to be explained in two perspectives, counterparty risk and arbitrage trading. Counterparty risk can be ignored in this case, because PMM has built a mechanism to limit this risk. In addition, the risk comes from trades by normal users, which are almost random and are statistically balanced against. Arbitrage trading is inevitable and contributes most of the loss, as onchain oracle price is always delayed from market. Hence, in the following backtesting, we focus on these two key values:</p><ul><li>Turnover rate (profit wise)</li><li>Arbitrage loss (loss wise)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="83-profit-evaluation"></a><strong>8.3 Profit Evaluation</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#83-profit-evaluation" title="Direct link to heading">#</a></h3><p>Assumptions:</p><ul><li>Our pool size is 1/10 of uniswap&#x27;s pool size</li><li>Base Token and Quote Token have the same value</li><li>PMM parameter k=0.1</li><li>Fee rate 0.3%</li></ul><p>Those assumptions are not set arbitrarily. Under this condition, PMM could provide the same liquidity as Uniswap, and hence it&#x27;s reasonable to assume PMM has the same trading volume as Uniswap. However, because of aggregators, it&#x27;s more realistic to assume PMM has half of the trading volume of Uniswap. According to <a href="https://info.uniswap.org/pair/0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc" target="_blank" rel="noopener noreferrer">history data</a><sup>[6]</sup>, PMM daily turnover rate is about 100% and ROI is 0.3%.</p><p>Please note: The backtest report is written at 2020/7/19. We use Uniswap&#x27;s historical data from 2020/6/1 to 2020/7/18.</p><p><img src="https://dodoex.github.io/docs/img/dodo_backtest.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="84-loss-evaluation"></a><strong>8.4 Loss Evaluation</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#84-loss-evaluation" title="Direct link to heading">#</a></h3><p>It&#x27;s more complex to evaluate arbitrage loss, as no PMM-like algorithm has been deployed before. The best alternative is backtest with the most stringent standards. below is the assumptions:</p><ul><li>Onchain oracle price is always delayed from market price</li><li>Oracle price updates whenever deviates from market price by more than 0.5% (chainlink threshold)</li><li>Arbitrageurs always have enough funding and never miss a trade</li><li>The external cost of arbitrageurs is 0.2% (including CEX fees and gas cost)</li></ul><p>We backtested using BTC price from Apr-2018 to Apr-2020 with 1 minute interval. Aggregate profit and loss, we got the following conclusions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="85-conclusion"></a><strong>8.5 Conclusion</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#85-conclusion" title="Direct link to heading">#</a></h3><p>The backtesting has covered most cases of the market environment, both the bull and bear market, even including the black swan event on 12th March. We concluded that:</p><ul><li>In most market environments, the fee income is sufficient to cover arbitrage losses and provides a very high rate of return (~80% APR)</li><li>When the market changes volatilely, despite of rises or falls, LP will lose a significant amount of money</li></ul><p>In brief, PMM makes proﬁts when the market is flat, while makes losses when volatile.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="86-advantage--disadvantage"></a><strong>8.6 Advantage &amp; Disadvantage</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#86-advantage--disadvantage" title="Direct link to heading">#</a></h3><p>Most quant strategies make proﬁts only when market price goes up or down, and there is nothing to do when the market is flat. In contrast, PMM can make considerable proﬁts when the price is nearly flat. Furthermore, unlike AMM, PMM never requires LP to deposit base and quote assets at a certain ratio. Instead, LP could deposit any amount of any asset as they want. As a result, PMM can be a supplement to the original strategies when the market is not volatile.</p><p>Nevertheless, we have to point out its disadvantages. As the old saying goes, there is no free lunch. When the market is volatile, LP suffers from significant loss. LP should make a balance between risks and beneﬁts. So we recommend traders withdraw their assets when they predict the market to be volatile. As a decentralized project, what we can do is very limited. But we would deﬁnitely try our best to adjust system parameters to help LP, especially when black swan event happens.</p><p>In addition, one of the inherent drawbacks of backtesting is it cannot simulate 100% of the real trading. But to mitigate this risk, we have performed the backtesting with the most conservative assumptions. Still, LP should determine to what extent they trust the backtesting result.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="87-faq-about-backtest"></a><strong>8.7 FAQ about Backtest</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#87-faq-about-backtest" title="Direct link to heading">#</a></h3><p>1.Where does the turnover rate data come from?</p><p>We have counted the historical data of Uniswap in the past month. Because the capital utilization rate of PMM algorithm is very high, the capital utilization rate can reach ten times that of Uniswap. So the actual turnover rate is also much higher than Uniswap.</p><p>2.Why do you use BTC price for backtesting?</p><p>Because we did not find ETH price data of high-precision. We would be very grateful if someone could provide ETH price historical data with 1min interval or more frequent. But it is reasonable to use BTC price to estimate loss, because ETH and BTC prices are highly correlated.</p><p>3.How does the arbitrage work?</p><p>The arbitrage is carried out when arbitrageurs notice that the price provided by the PMM is more beneficial to them than the market price, i.e. the difference between the PMM and the market price is less than its comprehensive arbitrage cost (PMM Fee + Arbitrage Cost)</p><p>4.Given that Chainlink&#x27;s BTC Oracle accuracy rate is 1%, why is it set to 0.5% here?</p><p>First of all, Chainlink will increase the accuracy rate of BTC Oracle to 0.5% soon. Secondly, PMM will focus on ETH trading pair for now. And the accuracy rate of Chainlink&#x27;s ETH Oracle is 0.5%.</p><p>5.Does the size of the funding pool have an impact on the backtest?</p><p>Yes, it does. ROI will not be so good if the pool size is too small. We need enough liquidity to compete with other liquidity sources. Actually, the 1/10 of Uniswap pool size required for backtesting is able to produce competitive liquidity, which equals only $900,000.</p><p>6.How about the gas cost</p><p>Swap between two standard ERC20 token cost 145,000 ~ 175,000 gas. The gas cost is slightly higher than Uniswap(~100,000 gas), but significantly lower than other protocols. For example, kyber costs ~400,000 gas; balancer costs ~300,000 gas; dydx costs ~400,000 gas;</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="9-token-economy"></a><strong>9 Token Economy</strong><a aria-hidden="true" tabindex="-1" class="hash-link" href="#9-token-economy" title="Direct link to heading">#</a></h2><p>Since inception, our goal at DODO Family has been to decentralize and diversify governance of the DODO Exchange. We would like to issue the Governance Token: DODO, to achieve this goal.</p><p>The total supply of DODO token is 1,000,000,000. The distribution would be:</p><p><img src="https://dodoex.github.io/docs/img/dodo_token_distribution.png"></p><p>60,000,000 DODO Token to Seed Round Investors. this part of token will be locked 1 year after token issuance, and then linearly vested over nest 2 years per Ethereum Block.</p><p>100,000,000 DODO Token to Private Round Investors. this part of token will be locked 6 month after token issuance, and then linearly vested over next 1 year per Ethereum Block.</p><p>150,000,000 DODO Token to Core Team / Future Hires / Advisors, this part of token will have the same lock up period with Seed Round Investors.</p><p>10,000,000 DODO Token reserved for Initial DODO Offering(IDO), this part of token will circulate immediately after IDO.</p><p>80,000,000 DODO Token reserved by DODOEX Foundation for operations, marketing campaign, partnership, exchange listing or future uses.</p><p>600,000,000 DODO Token reserved for community incentives. This part of Token will be distributed to DODO&#x27;s supporter who participate in the protocol.</p><p>In DODO&#x27;s vision for a prudent, truly decentralized governance model, individual traders and liquidity providers (LPs) assume essential roles in ensuring the integrity of the ecosystem as its participants. The DODO team recognizes their importance in facilitating the growth of the DODO platform, and firmly believes that early adopters should be rewarded accordingly for their faith in the platform as it scales up. This is why the team intends to distribute DODO tokens to LPs in a fair and transparent manner.</p><p>Liquidity mining has been empirically proven by various DeFi projects to be an extremely effective and appealing way to incentivize participants, and the team may consider adopting this scheme going forward if needed. And the DODO Token mining and distribution strategy can be modified by DAO Governance in future.</p><p><strong>References</strong></p><p>[1]<a href="https://en.wikipedia.org/wiki/Bid%E2%80%93ask%5C_spread" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Bid%E2%80%93ask\_spread</a></p><p>[2]<a href="https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/lib/DODOMath.sol" target="_blank" rel="noopener noreferrer">https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/lib/DODOMath.sol</a></p><p>[3]<a href="https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/impl/Trader.sol" target="_blank" rel="noopener noreferrer">https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/impl/Trader.sol</a></p><p>[4]<a href="https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/helper/UniswapArbitrageur.sol" target="_blank" rel="noopener noreferrer">https://github.com/DODOEX/dodo-smart-contract/blob/master/contracts/helper/UniswapArbitrageur.sol</a></p><p>[5]<a href="https://etherscan.io/address/0xbf90b54cc00ceeaa93db1f6a54a01e3fe9ed4422" target="_blank" rel="noopener noreferrer">https://etherscan.io/address/0xbf90b54cc00ceeaa93db1f6a54a01e3fe9ed4422</a></p><p>[6]<a href="https://info.uniswap.org/pair/0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc" target="_blank" rel="noopener noreferrer">https://info.uniswap.org/pair/0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc</a></p></div></div></div></div></div></main></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 DODOEX, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/styles.218d5230.js"></script>
<script src="/docs/runtime~main.e8d907cc.js"></script>
<script src="/docs/main.6ae98335.js"></script>
<script src="/docs/1.fa82b0fd.js"></script>
<script src="/docs/2.954ba3eb.js"></script>
<script src="/docs/46.f6499e89.js"></script>
<script src="/docs/8eee19dc.b0daa17d.js"></script>
</body>
</html>