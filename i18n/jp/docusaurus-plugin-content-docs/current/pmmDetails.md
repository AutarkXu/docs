---
id: pmmDetails
title: PMMコアコンセプト
sidebar_label: PMMコアコンセプト
---

## Base TokenとQuote Token

`Base`と`quote`は繰り返して言及されるコンセプトで、両者を区別する二つの方法があります。
 
- 取引を行うペアの中で、`base`はハイフンの前の仮想通貨で、`quote`はハイフンの後ろの仮想通貨です。
 
- 取引する時、価格は通常いくつかの`quote` tokenで一つの`base` tokenを買うことで表します。
 
例えば、ETH-USDCの取引ペアでは、ETHは`base` tokenで、USDC は`quote` tokenです。
 
 
## PMMパラメータ

PMMアルゴリズムには4つのパラメータがあります。
 
- $B_0$（base token回帰目標値）：マーケット・メーカーがチャージした総量
 
- $Q_0$（quote token回帰目標値）：マーケット・メーカーがチャージした総量
 
- $B$（base token資産）：現在の資産池のbase tokenの量
 
- $Q$（quot token資産）：現在の資産池のquote tokenの量


## PMM定価式

PMMの価格曲線に対応する式は以下の通りです。
 
$$P_{margin}=iR$$
 
$R$は以下の式で決定されます。
 
$$もし \ B＜B_0 \ の場合、R＝1-k+(\frac{B_0}{B})^2k$$
$$もし \ Q＜Q_0 \ の場合、R＝1/(1-k+(\frac{Q_0}{Q})^2k)$$
 
$$その他の場合 \ R=1$$
 
$i$ はオラクル（oracle）によって提供される市場価格で、$k$は一つのパラメータで、$$0<k≤1$$。


## PMMアルゴリズムの三つの状態

任意の時間においてPMMアルゴリズムは三つの状態にすぎません：base tokenとquote tokenは同じです；base tokenが不足しています；quote tokenが不足しています。
 
 ![](https://dodoex.github.io/docs/img/dodo_mode_switch.jpeg)
 
最初に何の取引もない時、資産池はバランスが取れています。base tokenとquote token は回帰目標に位置しています。つまり$B=B_0$、$Q=Q_0$です。
 
トレーダーがbase tokenを売るとき、base token資産池の残高が回帰目標より高いです。逆に、quote tokenの資産池の残高が回帰目標より低いです。この場合、PMMは多かった分のbase tokenを売りにして資産池がバランスの取れた状態に戻そうとすることを試みます。
 
同じように、トレーダーがbase tokenを購入するとき、quote token資産池の残高は回帰目標より高くなります；base token残高は回帰目標より低いです。PMMは多かった分のquote tokenを売りにして、バランスの取れた資産池に戻そうとすることを試みます。
 
パラメータ$R$は回帰過程で非常に重要な役割を果たします。資産池がバランスからずればずれるほど、Rは`1`から離れます。PMMが提示した価格と市場価格との差が出た場合、裁定取引により資産池をバランス状態に戻すことができます。


## 取引料金

取引ごとに少量の手数料が取られます。この手数料はマーケット・メーカーの資産に比例してマーケット・メーカーに分けられます。
 
言い換えれば、トレーダーは手数料を支払い、マーケット・メーカーはその手数料を分け得ることができます。例えば、ETH-USDCのペアで、トレーダーがETHを購入するとき、手数料としてETHを少し支払う必要があります。この部分のETHはマーケット・メーカーに分配されます。トレーダーがETHを売る時、手数料としてUSDCを少し支払う必要があり、この部分のUSDCはマーケット・メーカーに分けられます。

:::注意：
資産池において、base tokenとquote tokenの収益率が異なります。
:::


## 運営手数料

運営手数料もトレーダーが納めます。その運営手数料は運営者（例えば、DAO、開発チーム）に配ります。

現在、DODOでは運営手数料を取っていません。


## 現金引き出し手数料

資産池から資金を引き出すと、他のマーケット・メーカーの収益に影響を与えます。DODOは資金の引き出しに手数料を取り、それを残りのマーケット・メーカーに分配します。

:::注意：
引き出し手数料は通常0或いは0.01%以下です。ただ、ある種類の資産が深刻に不足している場合にのみ、マーケット・メーカーが当該資産を引き出そうとする場合、資産引き出し手数料は大幅に高くなります。

現金引き出し手数料の設計は、DODOの健全な発展を長期に支援するマーケット・メーカーを保護するためです。

:::


## 資産チャージ奨励

資産が不足している場合、資産池に資産をチャージしたマーケット・メーカーは奨励金が得られます。
 
以下の部分で、これらのコンセプトの背後にある数学原理を詳しく解説します。


## スリページ係数

以下にスリページ係数$$k$$を紹介します。このパラメータによってDODOは異なる市場状況に柔軟に対応できるようにしました。
 
![](https://dodoex.github.io/docs/img/dodo_k.jpeg)
 
$$k=0$$の時に、DODOは市場価格で正常に取引できます（図中の青い線）。$$k$$が大きくなると、DODOの価格曲線がより急上昇になります。これはより多くの市場資金が市場価格から離れた位置に置かれて、資金の利用率が低いからです。$$k$$が$$1$$までに上がると、市場価格近くの滑らかなカーブが完全になくなり、この時の価格曲線はUniswapのAMM曲線と同じようになります。
 
一般的に、我々は$$k$$を比較的小さい値に設定することを勧めます。例えば$$0.1$$、この場合、AMMの10倍の流動性を提供できます。
