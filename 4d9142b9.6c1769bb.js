(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{116:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(6),i=(n(0),n(144)),o={id:"contractUseGuide",title:"Use Guide",sidebar_label:"Use Guide"},c={id:"contractUseGuide",isDocsHomePage:!1,title:"Use Guide",description:"For traders",source:"@site/docs/contractUseGuide.md",permalink:"/docs/docs/contractUseGuide",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/contractUseGuide.md",sidebar_label:"Use Guide",sidebar:"someSidebar",previous:{title:"Smart Contract Framework",permalink:"/docs/docs/framework"},next:{title:"Flash Swap",permalink:"/docs/docs/flashSwap"}},u=[{value:"For traders",id:"for-traders",children:[]},{value:"For liquidity providers",id:"for-liquidity-providers",children:[]}],l={rightToc:u};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"for-traders"},"For traders"),Object(i.b)("p",null,"\u5bf9 trader \u6765\u8bb2\uff0c\u6574\u4e2a\u5408\u7ea6\u53ea\u6709\u4e24\u4e2a\u51fd\u6570\u9700\u8981\u5173\u5fc3\uff1a",Object(i.b)("inlineCode",{parentName:"p"},"buyBaseToken")," \u548c ",Object(i.b)("inlineCode",{parentName:"p"},"sellBaseToken")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"function buyBaseToken(\n    uint256 amount,\n    uint256 maxPayQuote,\n    bytes calldata data\n) external returns (uint256 payQuote);\n")),Object(i.b)("p",null,"Buy exactly ",Object(i.b)("inlineCode",{parentName:"p"},"amount")," of base token. The transaction will revert if \u9700\u8981\u652f\u4ed8\u7684 quote token \u591a\u4e8e",Object(i.b)("inlineCode",{parentName:"p"},"maxPayQuote"),". \u5982\u679c",Object(i.b)("inlineCode",{parentName:"p"},"data"),"\u4e0d\u4e3a\u7a7a\uff0c\u5219\u89e6\u53d1 flash swap\u3002"),Object(i.b)("p",null,"The return value ",Object(i.b)("inlineCode",{parentName:"p"},"payQuote")," is the exactly amount you will pay."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"function sellBaseToken(\n    uint256 amount,\n    uint256 minReceiveQuote,\n    bytes calldata data\n) external returns (uint256 receiveQuote);\n")),Object(i.b)("p",null,"Sell exactly ",Object(i.b)("inlineCode",{parentName:"p"},"amount")," of base token. The transaction will revert if \u5c06\u4f1a\u6536\u5230\u7684 quote token \u5c11\u4e8e",Object(i.b)("inlineCode",{parentName:"p"},"minReceiveQuote"),". \u5982\u679c",Object(i.b)("inlineCode",{parentName:"p"},"data"),"\u4e0d\u4e3a\u7a7a\uff0c\u5219\u89e6\u53d1 flash swap\u3002"),Object(i.b)("p",null,"The return value ",Object(i.b)("inlineCode",{parentName:"p"},"receiveQuote")," is the exactly amount you will receive."),Object(i.b)("p",null,"DODO also provides view version for these two functions. View functions could be executed without send transactions and help users estimate the trade price before spend gas."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"function querySellBaseToken(\n  uint256 amount\n) external view returns (uint256 receiveQuote);\n\nfunction queryBuyBaseToken(\n  uint256 amount\n) external view returns (uint256 payQuote);\n")),Object(i.b)("p",null,"\u4e0b\u4e00\u8282\u6211\u4eec\u5c06\u4ecb\u7ecd\u66f4\u591a\u5173\u4e8e",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"./flashSwap"}),"flash swap"),"\u7684\u5185\u5bb9"),Object(i.b)("h2",{id:"for-liquidity-providers"},"For liquidity providers"),Object(i.b)("p",null,"\u5bf9\u4e8e liquidity provider \u6765\u8bf4\uff0c\u6700\u91cd\u8981\u7684\u4e24\u4e2a\u529f\u80fd\u662f deposit \u548c withdraw\u3002\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u7ec4\u51fd\u6570\u6765\u5e2e\u52a9 liquidity providers \u7075\u6d3b\u7ba1\u7406\u8d44\u4ea7\u3002"),Object(i.b)("p",null,"PMM \u7b97\u6cd5\u6700\u4f18\u4f18\u52bf\u7684\u4e00\u70b9\u662f\u53ef\u4ee5\u5355\u72ec\u7ba1\u7406 base \u6216 quote \u8d44\u4ea7\uff0c\u56e0\u6b64\u4e0b\u5217\u51fd\u6570\u90fd\u6709\u4e24\u4e2a\u7248\u672c\uff0c\u4e24\u4e2a\u7248\u672c\u529f\u80fd\u4e00\u81f4\uff0c\u5206\u522b\u64cd\u4f5c base \u548c quote \u8d44\u4ea7\u3002"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"\n  function depositBase(\n    uint256 amount\n  ) external returns (uint256 capital)\n\n  function depositQuote(\n    uint256 amount\n  ) external returns (uint256 capital)\n\n")),Object(i.b)("p",null,"Deposit exactly ",Object(i.b)("inlineCode",{parentName:"p"},"amount")," of asset into funding pool. Returns the capital amount issued for you."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"capital \u8868\u793a\u4e86 liquidity provider \u5360 funding pool \u4efd\u989d\u7684\u591a\u5c11\u3002capital \u662f ERC20\uff0c\u53ef\u4ee5\u88ab\u81ea\u7531\u4ea4\u6613\u3002\u6bcf\u4e2a dodo \u90fd\u6709\u4e24\u79cd capital\uff0c\u5206\u522b\u4ee3\u8868\u4e86 base token funding pool \u548c quote token funding pool \u7684\u4efd\u989d\u3002"))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"\n  function getLpBaseBalance(address lp) public view returns (uint256 lpBalance)\n\n  function getLpQuoteBalance(address lp) public view returns (uint256 lpBalance)\n\n")),Object(i.b)("p",null,"\u6839\u636e liquidity provider \u7684\u5730\u5740",Object(i.b)("inlineCode",{parentName:"p"},"lp"),"\u67e5\u8be2\u5176 funding pool \u4f59\u989d"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"\n  function withdrawBase(\n    uint256 amount\n  ) external returns (uint256 receive)\n\n  function withdrawQuote(\n    uint256 amount\n  ) external returns (uint256 receive)\n\n")),Object(i.b)("p",null,"Try to withdraw ",Object(i.b)("inlineCode",{parentName:"p"},"amount")," of asset from funding pool. As there may be withdraw fee, the functions return the exact amount of asset received by message sender."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"\n  function withdrawAllBase() external returns (uint256 receive)\n\n  function withdrawAllQuote() external returns (uint256 receive)\n\n")),Object(i.b)("p",null,"\u7531\u4e8e\u8d44\u91d1\u6c60\u89c4\u6a21\u5728\u52a8\u6001\u53d8\u5316\uff08\u56e0\u4e3a\u968f\u65f6\u53ef\u80fd\u6709\u4ea4\u6613\u53d1\u751f\uff09\uff0c\u4e3a\u4e86\u5e2e\u52a9 liquidity provider \u5b8c\u6574\u5730\u53d6\u51fa\u5168\u90e8\u8d44\u4ea7\uff0c\u4e0a\u9762\u4e24\u4e2a\u51fd\u6570\u4f1a\u6d88\u8017 message sender \u7684\u5168\u90e8 capital\uff0c\u5e76\u5c06\u5bf9\u5e94\u7684\u8d44\u4ea7 withdraw \u51fa\u6765\u3002\u6700\u540e\u8fd4\u56de the exact amount of asset received by message sender."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"\n  function getWithdrawQuotePenalty(uint256 amount) public view returns (uint256 penalty)\n\n  function getWithdrawBasePenalty(uint256 amount) public view returns (uint256 penalty)\n\n")),Object(i.b)("p",null,"\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cwithdraw \u8d44\u4ea7\u4f1a\u6536\u53d6",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"./coreConcept#withdraw-fee"}),"fee"),".\u4e0a\u9762\u4e24\u4e2a\u51fd\u6570\u63d0\u4f9b\u4e86\u67e5\u8be2 withdraw fee \u7684\u53ea\u8bfb\u65b9\u6cd5\u3002\u5982\u679c\u63d0\u4ea4\u4e86 withdraw \u6570\u91cf\u4e3a",Object(i.b)("inlineCode",{parentName:"p"},"amount")," \u7684\u8bf7\u6c42\uff0c\u90a3\u4e48\u5c06\u4f1a\u88ab\u6536\u53d6",Object(i.b)("inlineCode",{parentName:"p"},"penalty"),"\u6570\u91cf\u7684\u8d39\u7528\u3002\u6700\u7ec8\u6536\u5230\u7684\u8d44\u4ea7\u6570\u91cf\u5c06\u4f1a\u662f",Object(i.b)("inlineCode",{parentName:"p"},"amount-penalty"),"."))}p.isMDXComponent=!0},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),p=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},s=function(e){var t=p(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),s=p(n),d=a,m=s["".concat(o,".").concat(d)]||s[d]||b[d]||i;return n?r.a.createElement(m,c(c({ref:t},l),{},{components:n})):r.a.createElement(m,c({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var l=2;l<i;l++)o[l]=n[l];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);